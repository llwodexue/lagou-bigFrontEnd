# 项目规范

## 项目命名规范

1. 名字统一使用单词或单词缩写命名，缩写名称需要在描述上写明全英文单词

2. 多个单词之间使用英文连字符"-"连接

   示例：`laos-ticket`、`ticket-base`

## 组件命名规范

1. Views。所有页面都用单独的文件夹承载，要么始终是单词大写开头 (PascalCase)，要么始终是横线连接 (kebab-case)。根据项目而定，推荐是横线连接

   示例：

   - `@/views/tools/server-manager/index.vue`
   - `@/views/tools/ServerManager/index.vue`

2. Components。所有的组件文件都是以大写开头

   示例：

   - `@/components/RightToolbar/index.vue`

3. Utils。所有的`.js/.ts`文件要么始终是单词驼峰，要么始终是横线连接。根据项目而定，推荐是驼峰

   示例：

   - `@/utils/aes-base64.ts`
   - `@/utils/aesBase64.ts`

   这里有一个需要额外注意的，封装的 hooks 或 store 须以大写开头

   示例：

   - `@/hooks/useConfig.ts`
   - `@/store/modules/tagsView.ts`

4. router 集中式管理，放在 src 根目录下的 router/routes 下，可以拆分不同模块的文件夹

5. 组件名要带有业务属性，如 PriceList、 PriceDetail 等。禁止直接使用通用名，如：From、List 等命名

6. vue 项目统一使用 scss，react 项目统一使用 less。可以在此基础上使用原子化 css

## 注释规范

1. TypeScript 接口、Hooks、Utils 的注释必须使用 [JSdoc 规范](https://jsdoc.app/)，使用 /** 内容 */ 格式，写名功能、参数、return 及 TODO。可用 VScode 插件生成标准格式
2. API 接口配置需要有详细的接口说明及 Yapi 文档地址
3. 所有组件、hook、store、等文件都必须添加创建者和创建日期。可用VScode插件生成标准格式
4. 方法内部单行注释，在被注释语句上方另起一行，使用 // 注释
5. 所有的枚举类型字段必须要有注释，说明每个数据项的用途

文件头部注释

```js
/*
 * @author: guojianli02@xxx.com
 * @date: 2023-04-02 9:36:57
 * @description: 树形下拉选择组件
 * 调用示例：....
 */
```

函数注释

```js
/**
 * @description: 格式化日期
 * @param {string} val 不带 - 的时间
 * @returns {string} 返回带 - 的时间
 */
export const transDate = val => {
  return val && val.replace(/(\d{4})(\d{2})(\d{2})/, '$1-$2-$3')
}
```

interface注释

```typescript
export interface IUserInfo {
  /**
   * id
   */
  id: number;
  /**
   * 角色
   */
  role: string;
}
```

API类注释

```js
/**
 * @description 用户请求接口
 * @param {string} params.uid 用户ID
 * @see https://yapi.xxx.com/project/1234/interface/api/12345 接口文档地址
 * @returns {Promise<xxx>}
 */
export const getUserInfo = ({ uid }) => {
  return request({
    url: '/user/userInfo',
    method: 'get',
    params: { uid }
  })
}
```

函数内单行注释

```js
function getData(xxx) {
	// 在被注释语句上方另起一行
  const data = xxx
  return data
}
```

## 开发规范

1. 用不到的代码删除，用不到的变量删除
2. 函数加注释，注释符合规范，注释后面保留一个空格
3. 始终使用 === 替代 ==
4. 组件 props 最好定义 default
5. 组件传参书写顺序：v-if > ref > 自定义指令 > 属性 > 方法
6. 变量命名语义化，驼峰命名，常量大写
7. 删除无用的调试日志（console.log、debugger）
8. 符合 eslint

语法规范：

- 三元判断不可多层嵌套
- if 嵌套不可超过3层以上
- 标签样式不能超过6层
- 页面及接口容错处理

## prettier

```js
module.exports = {
  // 一行最多 120 字符
  printWidth: 120,
  // 使用 2 个空格缩进
  tabWidth: 2,
  // 不使用缩进符，而使用空格
  useTabs: false,
  // 行尾不需要有分号
  semi: false,
  // 使用单引号
  singleQuote: true,
  // jsx 不使用单引号，而使用双引号
  jsxSingleQuote: true,
  // jsx 标签的反尖括号需要换行
  bracketSameLine: false,
  // 末尾不需要有逗号
  trailingComma: 'none',
  // 大括号内的首尾需要空格
  bracketSpacing: true,
  // 对象的 key 仅在必要时用引号
  quoteProps: 'as-needed',
  // 箭头函数，只有一个参数的时候，不需要括号
  arrowParens: 'avoid',
  // 所有元素间的空格都会被忽略，直接另起一行
  htmlWhitespaceSensitivity: 'ignore',
  // vue 文件中的 script 和 style 内不用缩进
  vueIndentScriptAndStyle: false,
  // 换行符使用 lf
  endOfLine: 'lf',
  // 格式化模板字符串里的内容
  embeddedLanguageFormatting: 'auto',
  // html, vue, jsx 中每个属性占一行
  singleAttributePerLine: false,
  // 使用默认的折行标准
  proseWrap: 'preserve'
}
```

## 分支管理

分支管理

| **分支管理**         | **命名规范**                       | **解释**                                                     |
| -------------------- | ---------------------------------- | ------------------------------------------------------------ |
| main 主分支          | main                               | 稳定版本分支，上线完成回归后后，由项目技术负责人从 release 分支合并进来，并打 tag |
| test 测试分支        | test/版本号示例：test/1.0.0        | 测试人员使用分支，测试时从 feature 分支合并进来，支持多人合并 |
| feature 功能开发分支 | feature/功能名称示例：feature/blog | 新功能开发使用分支，基于master建立                           |
| hotfix修复分支       | hotfix/功能名称示例：fix/blog      | 紧急线上bug修复使用分支，基于master建立                      |
| release 上线分支     | release/版本号示例：release/0.1.0  | 用于上线的分支，基于 master 建立，必须对要并入的 分支代码进行 Code review 后，才可并入上线 |

版本号管理规范

| **版本名称** | **定义**                 | **示例**      |
| ------------ | ------------------------ | ------------- |
| 主版本       | 含有破坏性更新、大调整等 | 1.1.0 > 2.0.0 |
| 次版本       | 增加新功能特性           | 1.1.0 > 1.2.0 |
| 补丁版本     | 修复问题等               | 1.1.0 > 1.1.1 |

Git 每次提交代码时加上手写 **提交说明（Commit message）**：

- 可以参考：[vuejs Pull requests](https://github.com/vuejs/core/pulls)

  Git 提交内容需要包含（做一个简化）：`type`（类型）、`commit`（详细信息）

  示例：`fix: 解决xxx出现的bug`

`type` 用于说明 `commit` 提交性质，通常值为下表：

| 值       | 描述                                                         |
| -------- | ------------------------------------------------------------ |
| feat     | 新增一个功能                                                 |
| fix      | 修复一个 Bug                                                 |
| docs     | 文档变更                                                     |
| style    | 代码格式（不影响功能，例如空格、分号等格式修正）             |
| refactor | 代码重构                                                     |
| perf     | 改善性能                                                     |
| test     | 测试                                                         |
| build    | 变更项目构建或外部依赖（例如scopes: webpack、gulp、npm等）   |
| ci       | 更改持续集成软件的配置文件和package中的scripts命令，例如scopes: Travis, Circle等 |
| chore    | 变更构建流程或辅助工具                                       |
| revert   | 代码回退                                                     |
