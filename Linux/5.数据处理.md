## 32 grep

grep：`Global Regular Expression（Processor | Parser | Printer）` 的简写，用以在命令行中使用正则表达式对文件进行匹配筛选

**简单用法**

在某个文件中查找匹配到正则的行

![image-20220823154214233](https://gitee.com/lilyn/pic/raw/master/lagoulearn-img/image-20220823154214233.png)

PCRE（Perl Compatible Regular Expressions）拥有更丰富的正则语法

- Js/Python/Java 中，正则表达式便是基于 PCRE

**grep -r**

- `-r`：`--recursive` 缩写，在目录中递归搜索

```bash
# 在当前目录递归文件寻找 vue
$ grep -r "vue" .
```

**grep -v**

- `-v`：`--invert-match` 缩写，根据正则反向匹配

```bash
# 打印不包含 vue 字符的行
$ grep -v vue package.json
```

## 33 sort

sort，对文件内容进行按行排序

```bash
$ cat <<EOF > sort.md
A 4
C 2
B 3
D 1
EOF

# 按照首字母排序
$ sort sort.md
A 4
B 3
C 2
D 1

# -r：--reverse：降序
$ sort -r sort.md
D 1
C 2
B 3
A 4

# -k：--key：按照第 k 列进行排序
$ sort -k 2 sort.md
D 1
C 2
B 3
A 4

# -n：--numeric-sort：根据数字大小而非字符排序
$ echo {20..0..1} | sort -n
```

sort 还可以对字符串进行排序

```bash
# grep -o：--only-matching，仅仅打印匹配到的字符，相当于将 hello 分成每行一个字符
# td -d "\n"：删除所有换行符
$ echo hello | grep -o . | sort | tr -d "\n"
ehllo
```

## 34 wc

`wc`：`word count` 的缩写，用以统计文本中字符、单词及行数

```bash
$ wc package.json
153  458 7432 package.json

# -l：--lines 行数
$ wc -l package.json
153 package.json

# 如果仅仅想显示行数
$ cat package.json | wc -l
153

# -w：--words 词数
$ wc -w package.json
458 package.json

# -c：--bytes 字节数
$ wc -c package.json
7432 package.json

# -m：--chars 字符数
$ wc -m package.json
7432 package.json
```

其中，字符串与字节数容易混淆，比如汉字以 UTF-8 表示，往往是三个字节一个字符

- 汉字占用字节可查看 [Unicode to UTF-8 小工具](https://devtool.tech/utf8)

```bash
# 六个字节
$ echo -n 你好 | wc -c
6

# 两个字符
$ echo -n 你好 | wc -m
2
```

- 字符：计算机中的字母、数字、符号等
- 字节：计量单位，表示数据量多少

## 35 jq

> 下载：[jq](https://stedolan.github.io/jq/#)

jq 是一款命令行 json 处理工具，类似 lodash 一样，它可以对 json 做各种各样的处理：`pick`、`get`、`filter`、`sort`、`map`

