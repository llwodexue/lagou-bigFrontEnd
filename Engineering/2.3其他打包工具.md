## Rollup

**概述**

- Rollup 更为小巧，仅仅是一款 ESM 打包器
- Rollup 中并不支持类似 HMR 这种高级特性
- Rollup 提供一个充分利用 ESM 各项特性的高效打包器

安装

```bash
yarn add rollup --dev
```

打包命令

- `--format`：指定代码输出格式
- `--file`：指定打包路径
- Rollup 会自动开启 `tree-shaking`

```bash
yarn rollup ./src/index.js --format iife --file dist/bundle.js
```

**配置文件**

- 新建 `rollup.config.js`
- `yarn rollup --config` 使用 `--config` 指定配置文件

```js
export default {
  input: 'src/index.js',
  output: {
    file: 'dist/bundle.js',
    format: 'iife'
  }
}
```

### 使用插件

插件是 Rollup 唯一扩展途径

- 加载其它类型资源模块
- 导入 CommonJS 模块
- 编译 ECMAScript 新特性

安装 `rollup-plugin-json`

```bash
yarn add rollup-plugin-json --dev
```

配置 `rollup.config.js`

```js
import json from 'rollup-plugin-json'

export default {
  input: 'src/index.js',
  output: {
    file: 'dist/bundle.js',
    format: 'iife'
  },
  plugins: [
    // 这里是将调用的结果放到数组中
    json()
  ]
}
```

Rollup 默认只能按照文件路径方式加载本地模块